# Server Configuration
SERVER_HOST=127.0.0.1
SERVER_PORT=3000

# Meilisearch Configuration
MEILISEARCH_URL=http://127.0.0.1:7700
MEILISEARCH_KEY=masterKey

# Qdrant Configuration (Phase 10: Semantic Search)
QDRANT_URL=http://127.0.0.1:6334
QDRANT_COLLECTION_NAME=page_embeddings

# OpenAI Configuration (Phase 5: AI Features)
# Required for email AI features: smart compose, summarization, priority ranking
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Crawler Configuration
CRAWLER_MAX_DEPTH=3
CRAWLER_MAX_CONCURRENT=10

# Logging
RUST_LOG=info

# Authentication - Zitadel OIDC (Phase 3: Migration from Ory to Zitadel)
ZITADEL_ISSUER_URL=https://auth.arack.io
ZITADEL_CLIENT_ID_SEARCH=353040740571480068
ZITADEL_CLIENT_ID_EMAIL=353040882842271748
ZITADEL_CLIENT_ID_ADMIN=353041000131788804
# Note: Using PKCE flow - no client secret needed

# Zitadel Management API (Custom Registration)
# Service account token for creating users programmatically
# Generate via: JWT Bearer grant with service account key
ZITADEL_MGMT_TOKEN=

# OAuth Redirect URIs
ZITADEL_REDIRECT_URI_SEARCH=https://api.arack.io/auth/callback
ZITADEL_REDIRECT_URI_EMAIL=https://api-mail.arack.io/auth/callback
ZITADEL_REDIRECT_URI_ADMIN=https://admin.arack.io/auth/callback

# Stalwart Mail Server Configuration
# URL for Stalwart Admin API (internal Docker network)
STALWART_URL=http://stalwart:8080
STALWART_ADMIN_USER=admin
STALWART_ADMIN_PASSWORD=adminpassword

# OIDC Mode: Set to true when Stalwart uses OIDC directory (users managed by Zitadel)
# When true: Users are auto-provisioned on first OAuth login, no API account creation
# When false: Accounts created via Stalwart Admin API (internal directory mode)
STALWART_OIDC_MODE=true

# Account Service - Central SSO (Phase 9)
# Create a new Web Application in Zitadel for account.arack.io
# Grant Types: Authorization Code with PKCE
# Redirect URI: https://account.arack.io/callback
ZITADEL_CLIENT_ID_ACCOUNT=

# Account Service Environment Variables
# These are used by the Go account-service (port 3002)
ACCOUNT_SERVER_HOST=0.0.0.0
ACCOUNT_SERVER_PORT=3002

# Zitadel API URL (for Management API and Session API)
ZITADEL_API_URL=https://auth.arack.io

# Zitadel Personal Access Token (PAT)
# Create via: Zitadel Console → Service Users → Create Service User → Generate PAT
# Required permissions: User creation, User search, Session management
ZITADEL_PAT=

# Account Service Session
ACCOUNT_SESSION_TTL=720h
ACCOUNT_TOKEN_REFRESH_THRESHOLD=5m

# Account Service Cookie (shared across .arack.io)
ACCOUNT_COOKIE_NAME=arack_session
ACCOUNT_COOKIE_DOMAIN=.arack.io
ACCOUNT_COOKIE_SECURE=true
ACCOUNT_COOKIE_HTTP_ONLY=true
ACCOUNT_COOKIE_SAME_SITE=lax
ACCOUNT_COOKIE_MAX_AGE=2592000
